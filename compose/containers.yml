services:
  filebrowser:
    container_name: filebrowser
    image: hurlenko/filebrowser
    user: "${UID}:${GID}"
    ports:
      - 6565:8080
    volumes:
      - /nas:/data/nas
      - /config:/data/config
      - /config/containers/filebrowser:/config
    environment:
      - FB_BASEURL=/filebrowser
    restart: unless-stopped
  audiobookshelf:
    container_name: audiobookshelf
    image: ghcr.io/advplyr/audiobookshelf:latest
    ports:
      - 13378:80
    volumes:
      - /nas/media/books:/audiobooks
      - /config/containers/audiobookshelf/config:/config
      - /config/containers/audiobookshelf/metadata:/metadata
    restart: unless-stopped
  duplicati:
    image: lscr.io/linuxserver/duplicati:latest
    container_name: duplicati
    environment:
      - PUID=$PUID
      - PGID=$PGID
      - TZ=$TZ
    volumes:
      - /config/containers/duplicati:/config
      - /nas/:/nas/
    ports:
      - 8200:8200
    restart: unless-stopped
  watchtower:
    container_name: watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - TZ=$TZ
      - WATCHTOWER_CLEANUP=true
      - WATCHTOWER_POLL_INTERVAL=86400
      # - WATCHTOWER_HTTP_API_TOKEN=watchtowertkn
    image: containrrr/watchtower
    restart: unless-stopped
  archisteamfarm:
    container_name: archisteamfarm
    volumes:
      - /config/containers/asf/config:/app/config
      - /config/containers/asf/logs:/app/logs
    ports:
      - 1242:1242
    image: justarchi/archisteamfarm
    restart: unless-stopped
  grocy:
    image: lscr.io/linuxserver/grocy:latest
    container_name: grocy
    environment:
      - PUID=$PUID
      - PGID=$PGID
      - TZ=$TZ
    volumes:
      - /config/containers/grocy:/config
    ports:
      - 9283:80
    restart: unless-stopped
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    environment:
      PUID: $PUID
      PGID: $PGID
    ports:
      - 3000:3000
    volumes:
      - /config/containers/homepage:/app/config # Make sure your local config directory exists
      - /var/run/docker.sock:/var/run/docker.sock:ro # optional, for docker integrations
      - /nas:/nas
    restart: unless-stopped
  qdirstat:
    container_name: qdirstat
    image: jlesage/qdirstat
    ports:
      - "5800:5800"
    volumes:
      - /config/containers/qdirstat:/config
      - /nas/:/nas
    restart: unless-stopped
  beets:
    image: lscr.io/linuxserver/beets:latest
    container_name: beets
    environment:
      - PUID=$PUID
      - PGID=$PGID
      - TZ=$TZ
    volumes:
      - /config/containers/beets:/config
      - /nas/media/music:/music
    ports:
      - 8337:8337
    restart: unless-stopped
  radicale:
    image: tomsquest/docker-radicale
    container_name: radicale
    ports:
      - 127.0.0.1:5232:5232
    init: true
    read_only: true
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    cap_add:
      - SETUID
      - SETGID
      - CHOWN
      - KILL
    deploy:
      resources:
        limits:
          memory: 256M
          pids: 50
    healthcheck:
      test: curl -f http://127.0.0.1:5232 || exit 1
      interval: 30s
      retries: 3
    restart: unless-stopped
    volumes:
      - /config/containers/radicale:/data
      - /config/containers/radicale/config:/config
